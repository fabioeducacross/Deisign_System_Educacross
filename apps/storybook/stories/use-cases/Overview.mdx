import { Meta } from '@storybook/blocks';
import { MermaidDiagram } from '../../src/components/MermaidDiagram';

<Meta title="Casos de Uso/Vis√£o Geral" />

# Vis√£o Geral dos Casos de Uso

## Introdu√ß√£o

Casos de uso descrevem **como** o sistema funciona internamente para atender as necessidades dos usu√°rios. Enquanto as [Jornadas](../?path=/docs/jornadas-aluno-matr√≠cula--docs) mostram a experi√™ncia do usu√°rio, os casos de uso documentam a l√≥gica de neg√≥cio, fluxos t√©cnicos e regras aplicadas.

---

## Estrutura de um Caso de Uso

Cada caso de uso segue esta estrutura padronizada:

### 1. **Informa√ß√µes Gerais**
- ID √∫nico (ex: UC-001)
- Nome descritivo
- Ator principal (quem inicia a a√ß√£o)
- Objetivo (o que ser√° alcan√ßado)
- Prioridade (P1, P2, P3)
- Status (planejado, em desenvolvimento, implementado)

### 2. **Pr√©-condi√ß√µes**
- Estado inicial necess√°rio antes de executar o caso de uso
- Permiss√µes requeridas
- Dados que devem existir

### 3. **P√≥s-condi√ß√µes**
- Estado final ap√≥s execu√ß√£o bem-sucedida
- Dados criados/modificados
- Notifica√ß√µes enviadas
- Logs registrados

### 4. **Fluxo Principal**
- Sequ√™ncia de passos do caminho feliz (happy path)
- Diagramas de sequ√™ncia UML
- Chamadas de API
- Valida√ß√µes aplicadas

### 5. **Fluxos Alternativos**
- Caminhos diferentes do principal
- Condi√ß√µes para cada alternativa
- Como o sistema se comporta

### 6. **Fluxos de Exce√ß√£o**
- Tratamento de erros
- Recupera√ß√£o de falhas
- Mensagens de erro
- Rollback de transa√ß√µes

### 7. **Regras de Neg√≥cio**
- Refer√™ncia √†s regras aplicadas (RN-XXX)
- Valida√ß√µes espec√≠ficas
- C√°lculos realizados

### 8. **Seguran√ßa**
- Autentica√ß√£o requerida
- Autoriza√ß√£o (permiss√µes)
- Prote√ß√µes contra ataques
- Auditoria

### 9. **Dados de Teste**
- Casos de teste v√°lidos
- Casos de teste inv√°lidos
- Dados mockados para desenvolvimento

### 10. **Performance**
- M√©tricas esperadas (tempo, throughput)
- Limites de carga
- Otimiza√ß√µes aplicadas

---

## Categorias de Casos de Uso

### üîê Autentica√ß√£o e Seguran√ßa
Casos relacionados a login, logout, recupera√ß√£o de senha, MFA.

- [UC-001: Login de Usu√°rio](../?path=/docs/casos-de-uso-autentica√ß√£o-uc-001-login-de-usu√°rio--docs)
- UC-002: Logout de Usu√°rio
- UC-003: Recuperar Senha
- UC-004: Ativar MFA
- UC-005: Alterar Senha

### üë§ Gest√£o de Usu√°rios
Casos relacionados a CRUD de usu√°rios e perfis.

- UC-010: Cadastrar Aluno
- UC-011: Editar Perfil de Usu√°rio
- UC-012: Desativar Conta
- UC-013: Promover Papel de Usu√°rio
- UC-014: Visualizar Perfil P√∫blico

### üìö Gest√£o de Cursos
Casos relacionados a cria√ß√£o e gerenciamento de cursos.

- UC-020: Criar Curso
- UC-021: Editar Estrutura Curricular
- UC-022: Matricular Aluno em Curso
- UC-023: Cancelar Matr√≠cula
- UC-024: Arquivar Curso

### üìÑ Gest√£o de Conte√∫do
Casos relacionados a materiais did√°ticos.

- UC-030: Upload de Material Did√°tico
- UC-031: Aprovar Conte√∫do (Coordenador)
- UC-032: Agendar Publica√ß√£o
- UC-033: Baixar Material
- UC-034: Reportar Conte√∫do Impr√≥prio

### üìù Avalia√ß√µes e Notas
Casos relacionados a cria√ß√£o e corre√ß√£o de avalia√ß√µes.

- UC-040: Criar Avalia√ß√£o
- UC-041: Responder Avalia√ß√£o (Aluno)
- UC-042: Corrigir Avalia√ß√£o Dissertativa
- UC-043: Lan√ßar Notas
- UC-044: Solicitar Revis√£o de Nota

### üìä Relat√≥rios e Analytics
Casos relacionados a visualiza√ß√£o de dados.

- UC-050: Gerar Relat√≥rio de Desempenho
- UC-051: Exportar Notas da Turma
- UC-052: Visualizar Dashboard Anal√≠tico
- UC-053: Comparar Turmas

### üîî Notifica√ß√µes
Casos relacionados a comunica√ß√£o com usu√°rios.

- UC-060: Enviar Notifica√ß√£o em Tempo Real
- UC-061: Enviar Email em Lote
- UC-062: Configurar Prefer√™ncias de Notifica√ß√£o
- UC-063: Marcar Notifica√ß√£o como Lida

### üí∞ Pagamentos (se aplic√°vel)
Casos relacionados a transa√ß√µes financeiras.

- UC-070: Processar Pagamento PIX
- UC-071: Gerar Boleto
- UC-072: Aplicar Desconto
- UC-073: Solicitar Reembolso

---

## Conven√ß√µes de Nomenclatura

### Identificadores
- **UC-XXX**: Caso de uso gen√©rico
- **UC-AUTH-XXX**: Autentica√ß√£o
- **UC-USER-XXX**: Usu√°rios
- **UC-COURSE-XXX**: Cursos
- **UC-CONTENT-XXX**: Conte√∫do
- **UC-EVAL-XXX**: Avalia√ß√µes
- **UC-REPORT-XXX**: Relat√≥rios

### Numera√ß√£o
- **001-099**: Autentica√ß√£o e seguran√ßa
- **100-199**: Gest√£o de usu√°rios
- **200-299**: Gest√£o de cursos
- **300-399**: Gest√£o de conte√∫do
- **400-499**: Avalia√ß√µes
- **500-599**: Relat√≥rios
- **600-699**: Notifica√ß√µes
- **700-799**: Pagamentos

---

## Relacionamento entre Artefatos

<MermaidDiagram chart={`
flowchart TD
    A[Jornada do Usu√°rio] --> B[Caso de Uso]
    B --> C[Regra de Neg√≥cio]
    B --> D[Endpoints de API]
    B --> E[Componentes de UI]
    C --> F[Valida√ß√µes]
    D --> G[Models de Dados]
    E --> H[Design System]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1e1
`} />

**Exemplo de rastreabilidade**:
1. **Jornada**: [Matr√≠cula do Aluno](../?path=/docs/jornadas-aluno-matr√≠cula--docs)
2. **Caso de Uso**: UC-022: Matricular Aluno em Curso
3. **Regras de Neg√≥cio**: 
   - RN-VAL-006 (Idade m√≠nima)
   - RN-VAL-007 (Pr√©-requisitos)
4. **API**: `POST /api/enrollments`
5. **Componentes**: [Button](../?path=/docs/componentes-button--docs), [Card](../?path=/docs/componentes-card--docs)

---

## Como Escrever um Novo Caso de Uso

### Passo 1: Identificar o Ator e Objetivo
```
Ator: Professor
Objetivo: Publicar material did√°tico para sua turma
```

### Passo 2: Definir Pr√© e P√≥s-condi√ß√µes
```
Pr√©: Professor autenticado, tem turma ativa
P√≥s: Material publicado, alunos notificados, log criado
```

### Passo 3: Mapear o Fluxo Principal
Listar cada passo do caminho feliz:
1. Professor acessa dashboard
2. Clica em "Adicionar material"
3. Seleciona arquivo
4. Sistema valida formato
5. ...

### Passo 4: Identificar Fluxos Alternativos
- E se o arquivo for muito grande?
- E se o professor n√£o tiver permiss√£o?
- E se a turma estiver arquivada?

### Passo 5: Definir Tratamento de Erros
- O que acontece se o upload falhar?
- Como recuperar de erro de rede?
- Qual mensagem mostrar ao usu√°rio?

### Passo 6: Referenciar Regras de Neg√≥cio
- Quais RNs se aplicam?
- Quais valida√ß√µes s√£o necess√°rias?

### Passo 7: Criar Diagramas
- Diagrama de sequ√™ncia para intera√ß√µes complexas
- Diagrama de fluxo para decis√µes

### Passo 8: Documentar Testes
- Casos de teste automatizados
- Dados de mock para desenvolvimento

---

## Template de Caso de Uso

```markdown
import { Meta } from '@storybook/blocks';

<Meta title="Casos de Uso/[Categoria]/[ID]: [Nome]" />

# [ID]: [Nome do Caso de Uso]

## Informa√ß√µes Gerais

| Atributo | Valor |
|----------|-------|
| **ID** | UC-XXX |
| **Nome** | ... |
| **Ator principal** | ... |
| **Objetivo** | ... |
| **Prioridade** | P1/P2/P3 |
| **Status** | ... |

## Pr√©-condi√ß√µes
...

## P√≥s-condi√ß√µes
### Sucesso
...
### Falha
...

## Fluxo Principal
...

## Fluxos Alternativos
...

## Fluxos de Exce√ß√£o
...

## Regras de Neg√≥cio Aplicadas
...

## Seguran√ßa
...

## Dados de Teste
...

## Performance
...

## Depend√™ncias
...
```

---

## Ferramentas Recomendadas

### Diagrama√ß√£o
- **Mermaid**: Diagramas de sequ√™ncia e fluxo (j√° integrado no Storybook)
- **PlantUML**: UML completo (alternativa)
- **Excalidraw**: Diagramas manuais

### Valida√ß√£o
- **Checklist de completude**: Todos os campos preenchidos?
- **Peer review**: Outro desenvolvedor revisou?
- **Teste de rastreabilidade**: Consegue ligar a jornada, caso de uso e regra?

---

## M√©tricas de Qualidade

Um bom caso de uso deve:
- ‚úÖ Ser compreens√≠vel por n√£o-t√©cnicos
- ‚úÖ Ter diagrama de sequ√™ncia para fluxos complexos
- ‚úÖ Listar todas as regras de neg√≥cio aplicadas
- ‚úÖ Incluir casos de teste
- ‚úÖ Ter m√©tricas de performance definidas
- ‚úÖ Estar atualizado com o c√≥digo real

---

## Refer√™ncias

- **Jornadas**: [Vis√£o Geral](../?path=/docs/jornadas-aluno-matr√≠cula--docs)
- **Regras de Neg√≥cio**: [Vis√£o Geral](../?path=/docs/regras-de-neg√≥cio-vis√£o-geral--docs)
- **Componentes**: [Design System](../?path=/docs/componentes-button--docs)

---

**√öltima atualiza√ß√£o**: 14 de janeiro de 2026  
**Respons√°vel**: Equipe de Engenharia  
**Revis√£o**: Trimestral
