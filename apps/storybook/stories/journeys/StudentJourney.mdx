import { Meta } from '@storybook/addon-docs/blocks';
import { MermaidDiagram, Section, Callout, DiagramGrid } from '../../src/components';

<Meta title="Jornadas/Aluno/Matr√≠cula" />

<Section 
  title="üéì Jornada de Matr√≠cula do Aluno" 
  level="primary"
  description="Fluxo completo de matr√≠cula de um novo aluno na plataforma Educacross"
  spacing="spacious"
>

## Vis√£o Geral

Esta jornada descreve o processo completo de matr√≠cula de um novo aluno na plataforma Educacross, desde o cadastro inicial at√© o acesso aos materiais do curso.

| Atributo | Valor |
|----------|-------|
| **Objetivo** | Aluno conseguir se matricular em um curso e acessar conte√∫do |
| **Dura√ß√£o m√©dia** | 15 minutos |
| **Taxa de conclus√£o** | 85% |
| **Usu√°rio** | Novo aluno (sem conta pr√©via) |

</Section>

---

## Fluxo Principal

<MermaidDiagram 
  chart={`
flowchart TD
    A[In√≠cio: Aluno acessa site] --> B{Tem conta?}
    B -->|N√£o| C[Criar conta]
    B -->|Sim| D[Fazer login]
    C --> E[Preencher cadastro]
    E --> F[Validar email]
    F --> D
    D --> G[Navegar cat√°logo]
    G --> H[Selecionar curso]
    H --> I{Pr√©-requisitos OK?}
    I -->|N√£o| J[Mostrar requisitos]
    J --> G
    I -->|Sim| K[Visualizar detalhes]
    K --> L{Decidiu matricular?}
    L -->|N√£o| G
    L -->|Sim| M[Preencher formul√°rio]
    M --> N{Pagamento necess√°rio?}
    N -->|Sim| O[Ir para pagamento]
    O --> P{Pagamento aprovado?}
    P -->|N√£o| Q[Mostrar erro]
    Q --> O
    P -->|Sim| R[Confirmar matr√≠cula]
    N -->|N√£o| R
    R --> S[Acessar dashboard aluno]
    S --> T[Visualizar materiais]
    T --> U[Fim: Aluno matriculado]
`} 
  caption="Fluxograma da matr√≠cula do aluno com todos os caminhos de decis√£o"
/>

---

## Etapas Detalhadas

<Section 
  title="1. Cadastro de Nova Conta" 
  level="secondary"
  description="Cria√ß√£o de credenciais de acesso para novo aluno"
  spacing="normal"
>

**Dados solicitados**:
- Nome completo (RN-VAL-005)
- Email (RN-VAL-002)
- CPF (RN-VAL-001)
- Data de nascimento (RN-VAL-006)
- Telefone (RN-VAL-004)
- Senha (RN-AUTH-001)

**Valida√ß√µes aplicadas**:
- Todos os campos s√£o validados em tempo real (RN-VAL-017)
- CPF e email devem ser √∫nicos
- Idade m√≠nima de 16 anos (RN-VAL-007)

<Callout type="warning" title="Pontos de Fric√ß√£o Identificados">
- **Senha complexa** pode frustrar usu√°rios
- **Valida√ß√£o de CPF** pode falhar por digita√ß√£o incorreta
- **Email j√° cadastrado** gera confus√£o
</Callout>

<Callout type="success" title="Melhorias Aplicadas">
- ‚úÖ Indicador de for√ßa de senha em tempo real
- ‚úÖ Formata√ß√£o autom√°tica de CPF e telefone
- ‚úÖ Sugest√£o de recupera√ß√£o de senha se email existe
</Callout>

**‚è±Ô∏è Tempo m√©dio**: 3 minutos

</Section>

<Section 
  title="2. Valida√ß√£o de Email" 
  level="secondary"
  description="Confirma√ß√£o de acesso ao email cadastrado"
  spacing="normal"
>

**Fluxo**:
1. Sistema envia email de confirma√ß√£o
2. Aluno recebe link √∫nico
3. Aluno clica no link
4. Sistema valida token
5. Conta √© ativada

**Regras de neg√≥cio**:
- Link expira em 24 horas (RN-VAL-003)
- Aluno tem acesso limitado at√© confirmar
- Sistema permite reenvio de email (m√°ximo 3 vezes por hora)

<Callout type="info" title="üí° Dica de Implementa√ß√£o">
Use um email transacional dedicado para melhorar taxa de entrega e evitar spam folder.
</Callout>

**Pontos de fric√ß√£o**:
- ‚ö†Ô∏è Email pode cair em spam
- ‚ö†Ô∏è Link pode expirar se aluno demorar

**Melhorias aplicadas**:
- ‚úÖ Instru√ß√£o para verificar spam/lixo eletr√¥nico
- ‚úÖ Bot√£o de reenviar email vis√≠vel
- ‚úÖ Notifica√ß√£o clara sobre prazo de 24h

**Tempo m√©dio**: 2 minutos

---

### 3. Explora√ß√£o do Cat√°logo

**Objetivo**: Encontrar curso de interesse.

**Recursos dispon√≠veis**:
- Busca por palavra-chave
- Filtros por √°rea, modalidade, dura√ß√£o
- Ordena√ß√£o por popularidade, data, pre√ßo
- Cards com informa√ß√µes resumidas

**Informa√ß√µes exibidas**:
- Nome do curso
- √Årea de conhecimento
- Carga hor√°ria
- Valor (se pago)
- Avalia√ß√£o (estrelas)
- N√∫mero de alunos

**Pontos de fric√ß√£o**:
- ‚ö†Ô∏è Muitas op√ß√µes podem sobrecarregar
- ‚ö†Ô∏è Filtros podem n√£o retornar resultados

**Melhorias aplicadas**:
- ‚úÖ Cursos recomendados baseados em perfil
- ‚úÖ Mensagem clara quando filtro n√£o retorna resultados
- ‚úÖ Sugest√£o de cursos similares

**Tempo m√©dio**: 5 minutos

---

### 4. Visualiza√ß√£o de Detalhes do Curso

**Objetivo**: Aluno avaliar se curso atende suas expectativas.

**Informa√ß√µes detalhadas**:
- Descri√ß√£o completa
- Objetivos de aprendizagem
- Pr√©-requisitos
- Estrutura curricular (m√≥dulos/disciplinas)
- Corpo docente
- Certifica√ß√£o
- Pol√≠tica de reembolso (se aplic√°vel)

**Regras de neg√≥cio**:
- Sistema verifica pr√©-requisitos automaticamente
- Mostra alerta se aluno n√£o atende crit√©rios (RN-VAL-009)
- Destaca cursos com vagas limitadas

**Pontos de fric√ß√£o**:
- ‚ö†Ô∏è Informa√ß√£o pode ser extensa
- ‚ö†Ô∏è Pr√©-requisitos podem bloquear matr√≠cula

**Melhorias aplicadas**:
- ‚úÖ Navega√ß√£o por abas (Sobre, Conte√∫do, Professores)
- ‚úÖ Indicador visual de pr√©-requisitos atendidos/n√£o atendidos
- ‚úÖ Sugest√£o de cursos preparat√≥rios se n√£o atende pr√©-requisitos

**Tempo m√©dio**: 3 minutos

---

### 5. Formul√°rio de Matr√≠cula

**Objetivo**: Coletar informa√ß√µes adicionais necess√°rias.

**Dados solicitados** (al√©m dos j√° cadastrados):
- Escolaridade
- Motiva√ß√£o (opcional)
- Como conheceu o curso (opcional)
- Termos e condi√ß√µes (obrigat√≥rio)

**Valida√ß√µes**:
- Termos devem ser aceitos explicitamente
- Sistema pr√©-preenche dados j√° cadastrados

**Pontos de fric√ß√£o**:
- ‚ö†Ô∏è Formul√°rio muito longo pode desanimar
- ‚ö†Ô∏è Termos longos s√£o ignorados

**Melhorias aplicadas**:
- ‚úÖ Apenas 3 campos obrigat√≥rios
- ‚úÖ Resumo visual dos termos principais
- ‚úÖ Link para vers√£o completa dos termos

**Tempo m√©dio**: 2 minutos

---

### 6. Pagamento (se aplic√°vel)

**Objetivo**: Processar pagamento de forma segura.

**M√©todos aceitos**:
- Cart√£o de cr√©dito
- PIX
- Boleto banc√°rio

**Fluxo**:
1. Aluno escolhe m√©todo
2. Sistema gera cobran√ßa
3. Aluno realiza pagamento
4. Sistema aguarda confirma√ß√£o
5. Matr√≠cula √© confirmada ap√≥s aprova√ß√£o

**Regras de neg√≥cio**:
- PIX: confirma√ß√£o em at√© 5 minutos
- Boleto: confirma√ß√£o em at√© 3 dias √∫teis
- Cart√£o: confirma√ß√£o imediata

**Pontos de fric√ß√£o**:
- ‚ö†Ô∏è Falha no pagamento frustra usu√°rio
- ‚ö†Ô∏è Tempo de espera para boleto

**Melhorias aplicadas**:
- ‚úÖ Acesso antecipado ao conte√∫do (bloqueio ap√≥s 7 dias sem pagamento)
- ‚úÖ Notifica√ß√£o por email/SMS sobre status
- ‚úÖ Retry autom√°tico para falhas tempor√°rias

**Tempo m√©dio**: 3 minutos (PIX/cart√£o) ou vari√°vel (boleto)

---

### 7. Confirma√ß√£o e Acesso

**Objetivo**: Aluno acessa materiais do curso.

**Fluxo p√≥s-confirma√ß√£o**:
1. Sistema envia email de boas-vindas
2. Matr√≠cula aparece no dashboard
3. Aluno pode acessar primeira aula
4. Calend√°rio de atividades √© exibido

**Funcionalidades dispon√≠veis**:
- Visualizar conte√∫do program√°tico
- Baixar materiais
- Participar de f√≥runs
- Visualizar cronograma

**Regras de neg√≥cio**:
- Conte√∫do liberado progressivamente (se configurado)
- Certificado dispon√≠vel ap√≥s conclus√£o

**Pontos de fric√ß√£o**:
- ‚ö†Ô∏è Aluno pode n√£o saber por onde come√ßar

**Melhorias aplicadas**:
- ‚úÖ Tutorial de boas-vindas (opcional)
- ‚úÖ Sugest√£o de pr√≥xima a√ß√£o destacada
- ‚úÖ Indicador de progresso vis√≠vel

**Tempo m√©dio**: 1 minuto

---

## Fluxos Alternativos

### Fluxo A: Aluno n√£o Atende Pr√©-requisitos

<MermaidDiagram chart={`
flowchart LR
    A[Tentar matricular] --> B{Atende pr√©-requisitos?}
    B -->|N√£o| C[Mostrar requisitos faltantes]
    C --> D[Sugerir cursos preparat√≥rios]
    D --> E{Aluno aceita sugest√£o?}
    E -->|Sim| F[Matricular em curso prep.]
    E -->|N√£o| G[Voltar ao cat√°logo]
`} />

### Fluxo B: Falha no Pagamento

<MermaidDiagram chart={`
flowchart LR
    A[Processar pagamento] --> B{Pagamento aprovado?}
    B -->|N√£o| C[Identificar motivo]
    C --> D{Erro tempor√°rio?}
    D -->|Sim| E[Retry autom√°tico]
    D -->|N√£o| F[Solicitar novo m√©todo]
    E --> B
    F --> A
`} />

---

## M√©tricas e KPIs

| M√©trica | Meta | Atual |
|---------|------|-------|
| Taxa de conclus√£o | ‚â• 85% | 82% |
| Tempo m√©dio total | ‚â§ 15 min | 14 min |
| Abandono no pagamento | ‚â§ 10% | 12% |
| Emails n√£o confirmados | ‚â§ 15% | 18% |
| Matr√≠cula sem suporte | ‚â• 90% | 88% |

---

## Pontos de Melhoria Identificados

1. **Email de confirma√ß√£o em spam** (18% n√£o confirmam)
   - A√ß√£o: Melhorar reputa√ß√£o do dom√≠nio de envio
   - A√ß√£o: Adicionar verifica√ß√£o por SMS alternativa

2. **Abandono no pagamento** (12%)
   - A√ß√£o: Implementar op√ß√£o de salvar dados do cart√£o
   - A√ß√£o: Adicionar parcelamento sem juros

3. **D√∫vidas sobre pr√©-requisitos** (15% contatam suporte)
   - A√ß√£o: Melhorar descri√ß√£o de pr√©-requisitos
   - A√ß√£o: Adicionar quiz de auto-avalia√ß√£o

---

## Regras de Neg√≥cio Relacionadas

- [RN-VAL-001 a RN-VAL-007](../?path=/docs/regras-de-neg√≥cio-valida√ß√µes--docs) - Valida√ß√µes de cadastro
- [RN-AUTH-001](../?path=/docs/regras-de-neg√≥cio-autentica√ß√£o--docs) - Senha
- [RN-PERM-010](../?path=/docs/regras-de-neg√≥cio-permiss√µes--docs) - Papel de aluno

---

## Refer√™ncias

- **Componentes**: [Input](../?path=/docs/componentes-input--docs), [Button](../?path=/docs/componentes-button--docs), [Card](../?path=/docs/componentes-card--docs)
- **Casos de Uso**: [UC-002: Cadastrar Aluno](../?path=/docs/casos-de-uso-usuarios--docs)

---

**√öltima atualiza√ß√£o**: 14 de janeiro de 2026  
**Respons√°vel**: Equipe de Produto  
**Revis√£o**: Mensal

</Section>
